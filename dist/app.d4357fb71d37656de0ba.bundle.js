/*! For license information please see app.d4357fb71d37656de0ba.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkproyek_berbagi_cerita=self.webpackChunkproyek_berbagi_cerita||[]).push([[524],{222:(t,r,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return r};var t,r={},e=Object.prototype,i=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function h(r,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype);return l(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new S(o||[])),!0),a}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var p={};function d(){}function y(){}function m(){}var g={};l(g,s,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(I([])));w&&w!==e&&i.call(w,s)&&(g=w);var b=m.prototype=d.prototype=Object.create(g);function A(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function e(o,a,s,u){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,s,u)}),(function(t){e("throw",t,s,u)})):r.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return e("throw",t,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,x(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){this.tryEntries.push(t)}function C(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function S(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function I(r){if(null!=r){var e=r[s];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(n(r)+" is not iterable")}return y.prototype=m,l(b,"constructor",m),l(m,"constructor",y),y.displayName=l(m,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},A(k.prototype),l(k.prototype,u,(function(){return this})),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=I,S.prototype={constructor:S,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),C(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;C(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:I(r),r:e,n},"next"===this.method&&(this.arg=t),p}},r}function i(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var a=t.apply(r,e);function s(t){i(a,n,o,s,u,"next",t)}function u(t){i(a,n,o,s,u,"throw",t)}s(void 0)}))}}const s={init:function(t,r){var e=this;this.mainElement=t,this.routes=r,this.currentView=null,window.addEventListener("hashchange",(function(){return e.handleRouteChange()})),this.handleRouteChange(),console.log("Router initialized.")},handleRouteChange:function(){var t=this;return a(o().mark((function r(){var e,n,i,s,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=window.location.hash||"#",n="#"===e?"":e,i=t.routes[n]||t.routes["*"]||t.routes[""],console.log("Router: Handling route change for path: '".concat(n,"'")),!i){r.next=15;break}return t.currentView&&"function"==typeof t.currentView.unmount&&(console.log("Router: Unmounting current view."),t.currentView.unmount()),s=new i(t.mainElement),t.currentView=s,console.log("Router: New view instance created for '".concat(n,"'.")),u=function(){var r=a(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Router: Starting DOM update for '".concat(n,"'.")),t.mainElement.innerHTML="",r.next=4,s.render();case 4:if(console.log("Router: viewInstance.render() completed for '".concat(n,"'.")),"function"!=typeof s.afterRender){r.next=10;break}return console.log("Router: Starting viewInstance.afterRender() for '".concat(n,"'.")),r.next=9,s.afterRender();case 9:console.log("Router: viewInstance.afterRender() completed for '".concat(n,"'."));case 10:console.log("Router: DOM update callback finished for '".concat(n,"'."));case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),console.log("Router: Bypassing View Transitions for testing. Updating DOM directly."),r.next=13,u();case 13:r.next=18;break;case 15:console.warn("Router: No view class found for path '".concat(n,"'. Displaying 404.")),t.mainElement.innerHTML="<p>404 - Halaman tidak ditemukan.</p>",t.currentView&&"function"==typeof t.currentView.unmount&&(t.currentView.unmount(),t.currentView=null);case 18:case"end":return r.stop()}}),r)})))()}};var u="https://story-api.dicoding.dev/v1";function c(){return localStorage.getItem("authToken")}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(){h=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new S(o||[])),!0),a}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var p={};function d(){}function y(){}function m(){}var g={};u(g,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(I([])));w&&w!==e&&n.call(w,i)&&(g=w);var b=m.prototype=d.prototype=Object.create(g);function A(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function e(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==l(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,x(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){this.tryEntries.push(t)}function C(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function S(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function I(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(l(r)+" is not iterable")}return y.prototype=m,u(b,"constructor",m),u(m,"constructor",y),y.displayName=u(m,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},A(k.prototype),u(k.prototype,a,(function(){return this})),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(b),u(b,s,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=I,S.prototype={constructor:S,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),C(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;C(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:I(r),r:e,n},"next"===this.method&&(this.arg=t),p}},r}function f(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){f(i,n,o,a,s,"next",t)}function s(t){f(i,n,o,a,s,"throw",t)}a(void 0)}))}}function d(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var r=function(t){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=l(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(r)?r:r+""}var m=function(){return t=function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"register",value:(f=p(h().mark((function t(r,e,n){var o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(u,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:e,password:n})});case 2:return o=t.sent,t.next=5,o.json();case 5:if(i=t.sent,o.ok&&!i.error){t.next=8;break}throw new Error(i.message||"Gagal mendaftar (HTTP ".concat(o.status,")"));case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)}))),function(t,r,e){return f.apply(this,arguments)})},{key:"login",value:(l=p(h().mark((function t(r,e){var n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(u,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,n.ok&&!o.error){t.next=8;break}throw new Error(o.message||"Gagal login (HTTP ".concat(n.status,")"));case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)}))),function(t,r){return l.apply(this,arguments)})},{key:"getAllStories",value:(s=p(h().mark((function t(){var r,e,n,o,i,a,s,l,f,p,d,y=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(r=y.length>0&&void 0!==y[0]?y[0]:{}).page,n=void 0===e?1:e,o=r.size,i=void 0===o?10:o,a=r.location,s=void 0===a?0:a,(l=c())||console.warn("Tidak ada token autentikasi untuk getAllStories. API mungkin akan gagal."),f=new URLSearchParams({page:n,size:i,location:s}),t.next=6,fetch("".concat(u,"/stories?").concat(f.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(l)}});case 6:return p=t.sent,t.next=9,p.json();case 9:if(d=t.sent,p.ok&&!d.error){t.next=12;break}throw new Error(d.message||"Gagal mengambil daftar cerita (HTTP ".concat(p.status,")"));case 12:return t.abrupt("return",d.listStory||[]);case 13:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"getStoryDetailById",value:(a=p(h().mark((function t(r){var e,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=c())||console.warn("Tidak ada token autentikasi untuk getStoryDetailById."),t.next=4,fetch("".concat(u,"/stories/").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 4:return n=t.sent,t.next=7,n.json();case 7:if(o=t.sent,n.ok&&!o.error){t.next=10;break}throw new Error(o.message||"Gagal mengambil detail cerita (HTTP ".concat(n.status,")"));case 10:return t.abrupt("return",o.story);case 11:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)})},{key:"addNewStory",value:(i=p(h().mark((function t(r){var e,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c()){t.next=4;break}return console.info("Tidak ada token, mencoba menambah cerita sebagai tamu..."),t.abrupt("return",this.addGuestStory(r));case 4:return t.next=6,fetch("".concat(u,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:r});case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,n.ok&&!o.error){t.next=12;break}throw new Error(o.message||"Gagal menambahkan cerita baru (HTTP ".concat(n.status,")"));case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"addGuestStory",value:(o=p(h().mark((function t(r){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(u,"/stories/guest"),{method:"POST",body:r});case 2:return e=t.sent,t.next=5,e.json();case 5:if(n=t.sent,e.ok&&!n.error){t.next=8;break}throw new Error(n.message||"Gagal menambahkan cerita sebagai tamu (HTTP ".concat(e.status,")"));case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"subscribeToNotifications",value:(n=p(h().mark((function t(r){var e,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c()){t.next=3;break}throw new Error("Autentikasi diperlukan untuk subscribe notifikasi.");case 3:return t.next=5,fetch("".concat(u,"/notifications/subscribe"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=t.sent,t.next=8,n.json();case 8:if(o=t.sent,n.ok&&!o.error){t.next=11;break}throw new Error(o.message||"Gagal subscribe notifikasi.");case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"unsubscribeFromNotifications",value:(e=p(h().mark((function t(r){var e,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c()){t.next=3;break}throw new Error("Autentikasi diperlukan untuk unsubscribe notifikasi.");case 3:return t.next=5,fetch("".concat(u,"/notifications/subscribe"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({endpoint:r})});case 5:return n=t.sent,t.next=8,n.json();case 8:if(o=t.sent,n.ok&&!o.error){t.next=11;break}throw new Error(o.message||"Gagal unsubscribe notifikasi.");case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}],r&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n,o,i,a,s,l,f}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(){v=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new S(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(I([])));w&&w!==e&&n.call(w,i)&&(y=w);var b=d.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==g(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,x(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){this.tryEntries.push(t)}function C(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function S(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function I(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(g(r)+" is not iterable")}return p.prototype=d,u(b,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},A(k.prototype),u(k.prototype,a,(function(){return this})),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(b),u(b,s,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=I,S.prototype={constructor:S,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),C(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;C(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:I(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function w(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function b(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){w(i,n,o,a,s,"next",t)}function s(t){w(i,n,o,a,s,"throw",t)}a(void 0)}))}}var A,k="stories";function x(){return A||(A=new Promise((function(t,r){if(!("indexedDB"in window))return console.warn("IndexedDB tidak didukung oleh browser ini."),r(new Error("IndexedDB not supported."));var e=indexedDB.open("ceritakita-db",1);e.onerror=function(t){console.error("IndexedDB error:",t.target.errorCode),r(t.target.error||new Error("IndexedDB error: ".concat(t.target.errorCode)))},e.onsuccess=function(r){console.log("IndexedDB berhasil dibuka."),t(r.target.result)},e.onupgradeneeded=function(t){console.log("IndexedDB upgrade dibutuhkan.");var r=t.target.result;r.objectStoreNames.contains(k)||(r.createObjectStore(k,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1}),console.log("Object store '".concat(k,"' dibuat.")))}})))}function E(t){return C.apply(this,arguments)}function C(){return(C=b(v().mark((function t(r){var e;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",new Promise((function(t,n){var o=e.transaction([k],"readwrite").objectStore(k).put(r);o.onsuccess=function(){console.log("Cerita dengan ID ".concat(r.id," berhasil disimpan/diupdate ke IndexedDB.")),t(o.result)},o.onerror=function(t){console.error("Gagal menyimpan cerita ID ".concat(r.id," ke IndexedDB:"),t.target.error),n(t.target.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return I.apply(this,arguments)}function I(){return(I=b(v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return r=t.sent,t.abrupt("return",new Promise((function(t,e){var n=r.transaction([k],"readonly").objectStore(k).getAll();n.onsuccess=function(){console.log("Berhasil mengambil ".concat(n.result.length," cerita dari IndexedDB.")),t(n.result.sort((function(t,r){return new Date(r.createdAt)-new Date(t.createdAt)})))},n.onerror=function(t){console.error("Gagal mengambil semua cerita dari IndexedDB:",t.target.error),e(t.target.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){return P.apply(this,arguments)}function P(){return(P=b(v().mark((function t(r){var e;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",new Promise((function(t,n){var o=e.transaction([k],"readwrite").objectStore(k).delete(r);o.onsuccess=function(){console.log("Cerita ID ".concat(r," berhasil dihapus dari IndexedDB.")),t("Cerita dengan ID ".concat(r," dihapus."))},o.onerror=function(t){console.error("Gagal menghapus cerita ID ".concat(r," dari IndexedDB:"),t.target.error),n(t.target.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(){O=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==j(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(j(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function _(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function T(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){_(i,n,o,a,s,"next",t)}function s(t){_(i,n,o,a,s,"throw",t)}a(void 0)}))}}function M(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function G(t){var r=function(t){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=j(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(r)?r:r+""}var F=function(){return t=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=r,this.view=e,this.stories=[],this.savedStoryIds=new Set},r=[{key:"loadStories",value:(o=T(O().mark((function t(){var r,e,n=this;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.view.showLoading(),this.savedStoryIds.clear(),t.prev=3,t.next=6,S();case 6:(e=t.sent).forEach((function(t){return n.savedStoryIds.add(t.id)})),console.log("".concat(e.length," cerita ditemukan di IndexedDB.")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.warn("Gagal mengambil cerita dari IndexedDB:",t.t0);case 14:if(!navigator.onLine){t.next=38;break}return console.log("Online, mengambil dari API..."),t.prev=16,t.next=19,this.model.getAllStories();case 19:if(!((r=t.sent)&&r.length>0)){t.next=24;break}t.t1=r,t.next=27;break;case 24:return t.next=26,S();case 26:t.t1=t.sent;case 27:this.stories=t.t1,t.next=36;break;case 30:return t.prev=30,t.t2=t.catch(16),console.warn("Gagal dari API:",t.t2.message,"Memuat dari DB..."),t.next=35,S();case 35:this.stories=t.sent;case 36:t.next=42;break;case 38:return console.log("Offline, memuat dari DB..."),t.next=41,S();case 41:this.stories=t.sent;case 42:this.stories&&this.stories.length>0?this.view.renderStories(this.stories,this.savedStoryIds):navigator.onLine?this.view.renderStories([],this.savedStoryIds):this.view.renderErrorMessage("Anda offline dan tidak ada cerita tersimpan."),t.next=49;break;case 45:t.prev=45,t.t3=t.catch(0),console.error("Error memuat cerita:",t.t3),this.view.renderErrorMessage(t.t3.message||"Terjadi kesalahan.");case 49:return t.prev=49,this.view.hideLoading(),t.finish(49);case 52:case"end":return t.stop()}}),t,this,[[0,45,49,52],[3,11],[16,30]])}))),function(){return o.apply(this,arguments)})},{key:"handleSaveStoryForOffline",value:(n=T(O().mark((function t(r){var e;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(e=this.stories.find((function(t){return t.id===r})))||!navigator.onLine){t.next=6;break}return t.next=5,this.model.getStoryDetailById(r);case 5:e=t.sent;case 6:if(!e){t.next=14;break}return t.next=9,E(e);case 9:this.savedStoryIds.add(r),this.view.showMessage("Cerita berhasil disimpan.","success"),this.view.updateStoryButtons(r,!0),t.next=15;break;case 14:throw new Error("Cerita tidak ditemukan.");case 15:t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),console.error("Gagal menyimpan:",t.t0),this.view.showMessage("Gagal menyimpan cerita.","error"),this.view.updateStoryButtons(r,!1);case 22:case"end":return t.stop()}}),t,this,[[0,17]])}))),function(t){return n.apply(this,arguments)})},{key:"handleDeleteStoryFromOffline",value:(e=T(O().mark((function t(r){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B(r);case 3:this.savedStoryIds.delete(r),this.view.showMessage("Cerita berhasil dihapus dari penyimpanan offline.","success"),this.view.updateStoryButtons(r,!1),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Gagal menghapus cerita offline:",t.t0),this.view.showMessage("Gagal menghapus cerita. Coba lagi.","error"),this.view.updateStoryButtons(r,!0);case 13:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return e.apply(this,arguments)})}],r&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n,o}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function N(){N=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==D(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(D(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function q(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function z(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function U(t){var r=function(t){if("object"!=D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=D(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(r)?r:r+""}e(274);var H=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mapContainerId=r,this.map=null,this.markersLayer=null,console.log("MapDisplay: Constructor for ID '".concat(r,"'"))},r=[{key:"initMap",value:(e=N().mark((function t(){var r,e,n,o,i,a,s=arguments;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.length>0&&void 0!==s[0]?s[0]:[-2.548926,118.0148634],e=s.length>1&&void 0!==s[1]?s[1]:5,n=document.getElementById(this.mapContainerId)){t.next=6;break}return console.error("MapDisplay: Container element ID '".concat(this.mapContainerId,"' NOT FOUND.")),t.abrupt("return");case 6:if("undefined"!=typeof L){t.next=10;break}return console.error("MapDisplay: Leaflet library (L) is not loaded."),n&&(n.innerHTML="Gagal memuat library peta."),t.abrupt("return");case 10:if(!this.map){t.next=13;break}return console.log("MapDisplay: Map for ID '".concat(this.mapContainerId,"' already initialized.")),t.abrupt("return");case 13:try{console.log("MapDisplay: Initializing map for ID '".concat(this.mapContainerId,"'")),this.map=L.map(this.mapContainerId).setView(r,e),o=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),i=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; ..."}),o.addTo(this.map),a={OpenStreetMap:o,Satelit:i},L.control.layers(a).addTo(this.map),this.markersLayer=L.featureGroup().addTo(this.map),console.log("MapDisplay: markersLayer (L.featureGroup) initialized and added to map.")}catch(t){console.error("MapDisplay: CRITICAL error during map initialization:",t),n&&(n.innerHTML="Gagal menginisialisasi peta: ".concat(t.message)),this.map=null,this.markersLayer=null}case 14:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){q(i,n,o,a,s,"next",t)}function s(t){q(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"addMarkers",value:function(t){var r=this;this.map&&this.markersLayer&&"undefined"!=typeof L?this.markersLayer instanceof L.FeatureGroup?(console.log("MapDisplay: Adding ".concat(t.length," markers.")),t.forEach((function(t){if("number"==typeof t.lat&&"number"==typeof t.lon){var e=L.marker([t.lat,t.lon]);t.popupContent&&e.bindPopup(t.popupContent),r.markersLayer.addLayer(e)}else console.warn("MapDisplay: Invalid coordinates for marker:",t)})),console.log("MapDisplay: Markers added to markersLayer.")):console.error("MapDisplay: markersLayer is not an instance of L.FeatureGroup in addMarkers."):console.warn("MapDisplay: Map or markersLayer not ready for addMarkers.")}},{key:"fitBoundsToMarkers",value:function(){if(this.map&&this.markersLayer&&"undefined"!=typeof L)if(this.markersLayer instanceof L.FeatureGroup){var t=this.markersLayer.getLayers().length;if(console.log("MapDisplay: Attempting fitBoundsToMarkers. Marker count: ".concat(t)),0!==t)try{var r=this.markersLayer.getBounds();if(r.isValid())this.map.fitBounds(r.pad(.1)),console.log("MapDisplay: fitBoundsToMarkers successful.");else if(console.warn("MapDisplay: Bounds from markersLayer are not valid (e.g., single point or no points with actual geometry)."),1===t){var e=this.markersLayer.getLayers()[0].getLatLng();this.map.setView(e,15),console.log("MapDisplay: Set view to single marker.")}}catch(t){console.error("MapDisplay: Error during getBounds() or fitBounds():",t),console.log("MapDisplay: Value of this.markersLayer during error:",this.markersLayer)}else console.warn("MapDisplay: No markers in markersLayer to fit bounds.")}else console.error("MapDisplay: markersLayer is not an instance of L.FeatureGroup in fitBoundsToMarkers.");else console.warn("MapDisplay: Map or markersLayer not ready for fitBoundsToMarkers.")}},{key:"clearMarkers",value:function(){this.markersLayer&&(this.markersLayer.clearLayers(),console.log("MapDisplay: Markers cleared."))}},{key:"destroyMap",value:function(){this.map&&(this.map.remove(),this.map=null,console.log("MapDisplay: Map destroyed.")),this.markersLayer=null}}],r&&z(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}(),R=e(481),Y=e.n(R);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function W(){W=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==V(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(V(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function K(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function X(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){K(i,n,o,a,s,"next",t)}function s(t){K(i,n,o,a,s,"throw",t)}a(void 0)}))}}function J(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Z(t){var r=function(t){if("object"!=V(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=V(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(r)?r:r+""}var Q=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainElement=r,this.mapDisplay=null},r=[{key:"render",value:(n=X(W().mark((function t(){return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mainElement.innerHTML='\n  <section class="story-list-page">\n    <h2>Semua Cerita</h2>\n    <div id="storyListMessage" class="message-area" style="display:none; margin-bottom: 15px;"></div>\n    <div id="storyList" class="story-list-container">\n      </div>\n    <div id="loadingIndicator" class="loading" style="display:none;">Memuat cerita...</div>\n    <div id="errorMessage" class="error-message" style="display:none;"></div>\n    <h3>Peta Lokasi Cerita</h3>\n    <div id="mainStoryMap" style="height: 400px; width: 100%; margin-top: 20px; background-color: #eee;">\n        Memuat peta utama...\n    </div>\n  </section>\n',this.storyListContainer=this.mainElement.querySelector("#storyList"),this.loadingIndicator=this.mainElement.querySelector("#loadingIndicator"),this.errorMessageElement=this.mainElement.querySelector("#errorMessage"),this.mainMapContainer=this.mainElement.querySelector("#mainStoryMap"),this.messageArea=this.mainElement.querySelector("#storyListMessage");case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=X(W().mark((function t(){var r;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new m,this.presenter=new F(r,this),this.mapDisplay=new H("mainStoryMap"),t.next=5,this.mapDisplay.initMap();case 5:return this._initEventListeners(),t.next=8,this.presenter.loadStories();case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_initEventListeners",value:function(){var t=this;this.storyListContainer.addEventListener("click",(function(r){var e=r.target,n=e.dataset.storyId;n&&t.presenter&&!e.disabled&&(r.preventDefault(),e.classList.contains("save-offline-button")?(console.log("Tombol Simpan Offline diklik untuk ID: ".concat(n)),e.textContent="Menyimpan...",e.disabled=!0,t.presenter.handleSaveStoryForOffline(n)):e.classList.contains("delete-offline-button")&&(console.log("Tombol Hapus Offline diklik untuk ID: ".concat(n)),confirm("Anda yakin ingin menghapus cerita ini dari penyimpanan offline?")&&(e.textContent="Menghapus...",e.disabled=!0,t.presenter.handleDeleteStoryFromOffline(n))))}))}},{key:"updateStoryButtons",value:function(t,r){var e=this.storyListContainer.querySelector('.save-offline-button[data-story-id="'.concat(t,'"]')),n=this.storyListContainer.querySelector('.delete-offline-button[data-story-id="'.concat(t,'"]'));e&&n&&(e.style.display=r?"none":"inline-block",e.textContent="Simpan Offline",e.disabled=!1,n.style.display=r?"inline-block":"none",n.textContent="Hapus Offline",n.disabled=!1)}},{key:"showMessage",value:function(t){var r=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.messageArea?(this.messageArea.textContent=t,this.messageArea.className="message-area ".concat(e),this.messageArea.style.display="block",setTimeout((function(){r.messageArea.style.display="none"}),4e3)):console.log("Message (".concat(e,"): ").concat(t))}},{key:"renderStories",value:function(t){var r=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(this.storyListContainer.innerHTML="",this.mapDisplay&&this.mapDisplay.clearMarkers(),t&&0!==t.length){var n=[];t.forEach((function(t){var o=document.createElement("div"),i=e.has(t.id);o.innerHTML=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return'\n  <article class="story-item" id="story-'.concat(t.id,'">\n    <figure class="story-figure">\n      <img src="').concat(t.photoUrl,'" alt="Gambar untuk cerita \'').concat(t.description.substring(0,30),"...' oleh ").concat(t.name,'" class="story-image">\n      <figcaption class="story-user">Oleh: ').concat(t.name||"Pengguna Anonim",'</figcaption>\n    </figure>\n    <div class="story-info">\n      <p class="story-description">').concat(t.description,'</p>\n      <p class="story-date">Diunggah: ').concat(new Date(t.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),"</p>\n      ").concat(t.lat&&t.lon?'<div id="map-'.concat(t.id,'" class="story-item-map" style="height: 150px; width: 100%; margin-top: 10px;" data-lat="').concat(t.lat,'" data-lon="').concat(t.lon,'" data-popup="').concat(t.name,": ").concat(t.description.substring(0,20),'...">Memuat peta...</div>'):'<p class="no-location">Tidak ada data lokasi.</p>','\n      \n      <button \n        class="save-offline-button" \n        data-story-id="').concat(t.id,'" \n        style="').concat(r?"display:none;":"",'">\n        Simpan Offline\n      </button>\n\n      <button \n        class="delete-offline-button" \n        data-story-id="').concat(t.id,'" \n        style="').concat(r?"":"display:none;",'">\n        Hapus Offline\n      </button>\n\n    </div>\n  </article>\n')}(t,i);var a=o.firstElementChild;if(r.storyListContainer.appendChild(a),null!=t.lat&&null!=t.lon){var s=parseFloat(t.lat),u=parseFloat(t.lon);if(isNaN(s)||isNaN(u)){var c=a.querySelector("#map-".concat(t.id));c&&(c.innerHTML="Lokasi Tidak Valid.")}else{n.push({lat:s,lon:u,popupContent:"<b>".concat(t.name,"</b>"),storyId:t.id});var l=a.querySelector("#map-".concat(t.id));if(l&&void 0!==Y())try{var h=Y().map(l,{scrollWheelZoom:!1,dragging:!1,touchZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1,tap:!1}).setView([s,u],13);Y().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OSM"}).addTo(h),Y().marker([s,u]).addTo(h).bindPopup("<b>".concat(t.name,"</b>"))}catch(t){l&&(l.innerHTML="Peta Gagal.")}}}else{var f=a.querySelector("#map-".concat(t.id));f&&(f.innerHTML="Tidak Ada Lokasi.",f.style.display="none")}})),n.length>0&&this.mapDisplay?(this.mapDisplay.addMarkers(n),this.mapDisplay.fitBoundsToMarkers()):this.mainMapContainer&&(this.mainMapContainer.innerHTML="<p>Tidak ada cerita dengan lokasi.</p>")}else this.storyListContainer.innerHTML="<p>Belum ada cerita untuk ditampilkan.</p>"}},{key:"showLoading",value:function(){this.loadingIndicator&&(this.loadingIndicator.style.display="block"),this.errorMessageElement&&(this.errorMessageElement.style.display="none")}},{key:"hideLoading",value:function(){this.loadingIndicator&&(this.loadingIndicator.style.display="none")}},{key:"renderErrorMessage",value:function(t){this.hideLoading(),this.errorMessageElement&&(this.errorMessageElement.textContent=t,this.errorMessageElement.style.display="block"),this.storyListContainer&&(this.storyListContainer.innerHTML=""),this.mainMapContainer&&(this.mainMapContainer.innerHTML="<p>Gagal: ".concat(t,"</p>"))}},{key:"unmount",value:function(){this.mapDisplay&&this.mapDisplay.destroyMap(),console.log("StoryListView unmounted")}}],r&&J(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(){tt=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==$(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError($(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function rt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function et(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function nt(t){var r=function(t){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=$(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(r)?r:r+""}var ot=function(){return t=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=r,this.view=e},r=[{key:"submitNewStory",value:(e=tt().mark((function t(r){var e,n,o,i;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!c(),t.prev=1,n=e?"pengguna terautentikasi":"tamu",this.view.showMessage("Mengirim cerita sebagai ".concat(n,"..."),"info"),t.next=6,this.model.addNewStory(r);case 6:o=t.sent,i=o.message||"Cerita berhasil ditambahkan!",e||(i+=" (sebagai tamu)"),this.view.showMessage(i,"success"),this.view.clearForm(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("Error submitting new story:",t.t0),this.view.showMessage(t.t0.message||"Gagal menambahkan cerita. Silakan coba lagi.","error");case 17:case"end":return t.stop()}}),t,this,[[1,13]])})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){rt(i,n,o,a,s,"next",t)}function s(t){rt(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t){return n.apply(this,arguments)})}],r&&et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(){at=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==it(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(it(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function st(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function ut(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ct(n.key),n)}}function ct(t){var r=function(t){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=it(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==it(r)?r:r+""}var lt=function(){return t=function t(r,e,n,o){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.videoElement=r,this.canvasElement=e,this.imagePreviewElement=n,this.onCaptureCallback=o,this.stream=null},r=[{key:"startStream",value:(e=at().mark((function t(){return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stopStream(),t.prev=1,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=4;break}throw new Error("getUserMedia tidak didukung oleh browser ini.");case 4:return t.next=6,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 6:return this.stream=t.sent,this.videoElement.srcObject=this.stream,this.videoElement.style.display="block",this.imagePreviewElement.style.display="none",t.abrupt("return",!0);case 13:throw t.prev=13,t.t0=t.catch(1),console.error("Error accessing camera: ",t.t0),this.stream=null,this.videoElement.style.display="none",t.t0;case 19:case"end":return t.stop()}}),t,this,[[1,13]])})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){st(i,n,o,a,s,"next",t)}function s(t){st(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"snapPhoto",value:function(){var t=this;if(!this.stream||!this.videoElement.srcObject)return console.warn("Stream kamera tidak aktif."),void alert("Kamera tidak aktif. Silakan aktifkan terlebih dahulu.");this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.getContext("2d").drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height);var r=this.canvasElement.toDataURL("image/jpeg");this.imagePreviewElement.src=r,this.imagePreviewElement.style.display="block",this.canvasElement.toBlob((function(r){if(r){var e=new File([r],"camera_shot.jpg",{type:"image/jpeg"});t.onCaptureCallback&&t.onCaptureCallback(e)}}),"image/jpeg",.9),this.stopStream()}},{key:"stopStream",value:function(){this.stream&&(this.stream.getTracks().forEach((function(t){return t.stop()})),this.stream=null,this.videoElement&&(this.videoElement.srcObject=null))}}],r&&ut(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function ft(){ft=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==ht(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(ht(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function pt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function dt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yt(n.key),n)}}function yt(t){var r=function(t){if("object"!=ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=ht(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ht(r)?r:r+""}var mt=function(){return t=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mapContainerId=r,this.onLocationSelectCallback=e,this.map=null,this.marker=null,console.log("MapPicker: Constructor called for ID '".concat(this.mapContainerId,"'"))},r=[{key:"initMap",value:(e=ft().mark((function t(){var r,e,n,o=this,i=arguments;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>0&&void 0!==i[0]?i[0]:[-6.2,106.816666],e=i.length>1&&void 0!==i[1]?i[1]:10,n=document.getElementById(this.mapContainerId)){t.next=6;break}return console.error("MapPicker: Container element dengan ID '".concat(this.mapContainerId,"' TIDAK DITEMUKAN di DOM.")),t.abrupt("return");case 6:if(void 0!==Y()){t.next=10;break}return console.error("MapPicker: Library Leaflet (L) TIDAK TERLOAD. Pastikan Leaflet JS dan CSS sudah dimuat."),n.innerHTML="Gagal memuat library peta. Cek konsol.",t.abrupt("return");case 10:if(!this.map){t.next=13;break}return console.log("MapPicker: Peta untuk ID '".concat(this.mapContainerId,"' sudah diinisialisasi sebelumnya.")),t.abrupt("return");case 13:try{console.log("MapPicker: Memulai inisialisasi peta di container '".concat(this.mapContainerId,"'. Default coords:"),r),this.map=Y().map(this.mapContainerId,{}).setView(r,e),console.log("MapPicker: Objek peta berhasil dibuat untuk '".concat(this.mapContainerId,"'.")),Y().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(this.map),console.log("MapPicker: Tile layer ditambahkan ke peta '".concat(this.mapContainerId,"'.")),this.map.on("click",(function(t){if(o.map){var r=t.latlng;console.log("MapPicker: Peta diklik di Lat: ".concat(r.lat,", Lng: ").concat(r.lng)),o.marker?o.marker.setLatLng(r):o.marker=Y().marker(r).addTo(o.map),o.onLocationSelectCallback&&o.onLocationSelectCallback({lat:r.lat,lon:r.lng})}else console.warn('MapPicker: map.on("click") dipanggil tetapi this.map adalah null.')})),navigator.geolocation?(console.log("MapPicker: Mencoba mendapatkan geolokasi pengguna..."),navigator.geolocation.getCurrentPosition((function(t){if(o.map){var r=[t.coords.latitude,t.coords.longitude];console.log("MapPicker: Geolokasi berhasil. Koordinat pengguna:",r),o.map.setView(r,13),console.log("MapPicker: map.setView() ke lokasi pengguna berhasil."),o.marker?o.marker.setLatLng(r):o.map&&(o.marker=Y().marker(r).addTo(o.map)),o.onLocationSelectCallback&&o.onLocationSelectCallback({lat:r[0],lon:r[1]})}else console.error("MapPicker: Callback geolocation berhasil, TETAPI this.map adalah null. Inisialisasi peta mungkin gagal sebelumnya.")}),(function(t){console.warn("MapPicker: Error geolokasi: ".concat(t.message,". Peta akan menggunakan tampilan default."))}),{timeout:1e4,enableHighAccuracy:!0})):console.log("MapPicker: Geolokasi tidak didukung oleh browser ini.")}catch(t){console.error("MapPicker: KRITIKAL ERROR saat inisialisasi peta di '".concat(this.mapContainerId,"':"),t),n&&(n.innerHTML="Gagal menginisialisasi peta: ".concat(t.message,". Cek konsol.")),this.map=null}case 14:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){pt(i,n,o,a,s,"next",t)}function s(t){pt(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"resetMap",value:function(){this.marker&&(this.marker.remove(),this.marker=null),console.log("MapPicker: Peta direset untuk '".concat(this.mapContainerId,"'."))}},{key:"destroyMap",value:function(){this.map&&(console.log("MapPicker: Menghancurkan peta untuk '".concat(this.mapContainerId,"'.")),this.map.remove(),this.map=null),this.marker=null}}],r&&dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function vt(){vt=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==gt(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(gt(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function wt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function bt(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){wt(i,n,o,a,s,"next",t)}function s(t){wt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function At(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function kt(t){var r=function(t){if("object"!=gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=gt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(r)?r:r+""}var xt=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainElement=r,this.photoFile=null,this.selectedCoords=null,this.cameraHelper=null,this.mapPicker=null},r=[{key:"render",value:(n=bt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mainElement.innerHTML='\n  <section class="add-story-page">\n    <h2>Bagikan Cerita Baru Anda</h2>\n    <form id="addStoryForm" novalidate>\n      <div class="form-group">\n        <label for="storyDescription">Deskripsi Cerita Anda:</label>\n        <textarea id="storyDescription" name="description" rows="4" required aria-describedby="descriptionError"></textarea>\n        <div id="descriptionError" class="error-feedback"></div>\n      </div>\n      \n      <div class="form-group">\n        <label for="storyPhotoSource">Sumber Foto:</label>\n        <select id="storyPhotoSource" name="photoSource">\n            <option value="file">Unggah File</option>\n            <option value="camera">Gunakan Kamera</option>\n        </select>\n      </div>\n\n      <div class="form-group" id="fileUploadGroup">\n        <label for="storyPhotoFile">Unggah Foto (Max 1MB, JPG/PNG):</label>\n        <input type="file" id="storyPhotoFile" name="photoFile" accept="image/jpeg, image/png">\n      </div>\n      \n      <div class="form-group" id="cameraGroup" style="display:none;">\n        <label>Ambil Foto dengan Kamera:</label>\n        <video id="cameraPreview" playsinline autoplay muted style="width: 100%; max-width: 320px; border: 1px solid #ccc;"></video>\n        <button type="button" id="snapPhotoButton" aria-label="Ambil Foto dari Kamera">Ambil Foto</button>\n        <canvas id="photoCanvas" style="display:none;"></canvas>\n        <img id="capturedImagePreview" src="#" alt="Pratinjau gambar yang diambil" style="display:none; max-width: 320px; margin-top: 10px;" />\n      </div>\n      <div id="photoError" class="error-feedback"></div>\n      \n      <div class="form-group">\n        <label>Pilih Lokasi (klik pada peta):</label>\n        <div id="mapPickerContainer" style="height: 300px; width: 100%; margin-bottom: 10px; background-color: #eee;">\n            Memuat peta untuk pemilihan lokasi...\n        </div>\n        <input type="hidden" id="storyLatitude" name="lat">\n        <input type="hidden" id="storyLongitude" name="lon">\n        <p>Lokasi terpilih: <span id="selectedLocationText">Belum ada</span></p>\n      </div>\n      \n      <button type="submit" id="submitStoryButton">Bagikan Cerita</button>\n      <div id="addStoryMessage" class="message-area" style="margin-top:15px;"></div>\n    </form>\n  </section>\n',this._cacheDOM();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_cacheDOM",value:function(){this.form=this.mainElement.querySelector("#addStoryForm"),this.descriptionInput=this.mainElement.querySelector("#storyDescription"),this.photoSourceSelect=this.mainElement.querySelector("#storyPhotoSource"),this.fileUploadGroup=this.mainElement.querySelector("#fileUploadGroup"),this.storyPhotoFileInput=this.mainElement.querySelector("#storyPhotoFile"),this.cameraGroup=this.mainElement.querySelector("#cameraGroup"),this.cameraPreview=this.mainElement.querySelector("#cameraPreview"),this.snapPhotoButton=this.mainElement.querySelector("#snapPhotoButton"),this.photoCanvas=this.mainElement.querySelector("#photoCanvas"),this.capturedImagePreview=this.mainElement.querySelector("#capturedImagePreview"),this.mapPickerContainer=this.mainElement.querySelector("#mapPickerContainer"),this.latitudeInput=this.mainElement.querySelector("#storyLatitude"),this.longitudeInput=this.mainElement.querySelector("#storyLongitude"),this.selectedLocationText=this.mainElement.querySelector("#selectedLocationText"),this.submitButton=this.mainElement.querySelector("#submitStoryButton"),this.messageArea=this.mainElement.querySelector("#addStoryMessage"),this.descriptionError=this.mainElement.querySelector("#descriptionError"),this.photoError=this.mainElement.querySelector("#photoError")}},{key:"afterRender",value:(e=bt(vt().mark((function t(){var r,e=this;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new m,this.presenter=new ot(r,this),this.cameraHelper=new lt(this.cameraPreview,this.photoCanvas,this.capturedImagePreview,(function(t){e.photoFile=t,e.storyPhotoFileInput.value="",e.displayPhotoError("")})),this.mapPicker=new mt("mapPickerContainer",(function(t){e.selectedCoords=t,e.latitudeInput.value=t.lat.toFixed(6),e.longitudeInput.value=t.lon.toFixed(6),e.selectedLocationText.textContent="Lat: ".concat(t.lat.toFixed(4),", Lon: ").concat(t.lon.toFixed(4))})),t.next=6,this.mapPicker.initMap();case 6:this._initEventListeners(),this._handlePhotoSourceChange();case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_initEventListeners",value:function(){var t=this;this.photoSourceSelect.addEventListener("change",this._handlePhotoSourceChange.bind(this)),this.snapPhotoButton.addEventListener("click",(function(){return t.cameraHelper.snapPhoto()})),this.storyPhotoFileInput.addEventListener("change",(function(r){if(r.target.files&&r.target.files[0]){var e=r.target.files[0];if(e.size>1048576)return t.displayPhotoError("Ukuran file maksimal adalah 1MB."),t.photoFile=null,r.target.value="",void(t.capturedImagePreview.style.display="none");t.photoFile=e,t.capturedImagePreview.src=URL.createObjectURL(e),t.capturedImagePreview.style.display="block",t.cameraHelper.stopStream(),t.displayPhotoError("")}})),this.form.addEventListener("submit",function(){var r=bt(vt().mark((function r(e){var n,o;return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),t._validateForm()){r.next=3;break}return r.abrupt("return");case 3:if(n=t.descriptionInput.value,(o=new FormData).append("description",n),!t.photoFile){r.next=10;break}o.append("photo",t.photoFile,t.photoFile.name||"camera-shot.jpg"),r.next=12;break;case 10:return t.displayPhotoError("Foto wajib diunggah atau diambil dari kamera."),r.abrupt("return");case 12:return t.selectedCoords&&(o.append("lat",t.selectedCoords.lat.toString()),o.append("lon",t.selectedCoords.lon.toString())),t.submitButton.disabled=!0,t.submitButton.textContent="Mengirim...",r.next=17,t.presenter.submitNewStory(o);case 17:t.submitButton.disabled=!1,t.submitButton.textContent="Bagikan Cerita";case 19:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())}},{key:"_validateForm",value:function(){var t=!0;return this.descriptionInput.value.trim()?this.displayDescriptionError(""):(this.displayDescriptionError("Deskripsi tidak boleh kosong."),t=!1),this.photoFile?this.displayPhotoError(""):(this.displayPhotoError("Foto wajib diunggah atau diambil dari kamera."),t=!1),t}},{key:"displayDescriptionError",value:function(t){this.descriptionError.textContent=t,this.descriptionError.style.display=t?"block":"none"}},{key:"displayPhotoError",value:function(t){this.photoError.textContent=t,this.photoError.style.display=t?"block":"none"}},{key:"_handlePhotoSourceChange",value:function(){var t=this;"camera"===this.photoSourceSelect.value?(this.cameraGroup.style.display="block",this.fileUploadGroup.style.display="none",this.cameraHelper.startStream().catch((function(r){console.error("Error starting camera: ",r),t.displayPhotoError("Tidak dapat mengakses kamera. Pastikan izin diberikan."),t.photoSourceSelect.value="file",t._handlePhotoSourceChange()})),this.photoFile=null,this.capturedImagePreview.style.display="none",this.storyPhotoFileInput.value=""):(this.cameraGroup.style.display="none",this.fileUploadGroup.style.display="block",this.cameraHelper.stopStream(),this.photoFile=null)}},{key:"showMessage",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.messageArea.textContent=t,this.messageArea.className="message-area ".concat(r),this.messageArea.style.display="block"}},{key:"clearForm",value:function(){this.form.reset(),this.photoFile=null,this.selectedCoords=null,this.selectedLocationText.textContent="Belum ada",this.latitudeInput.value="",this.longitudeInput.value="",this.capturedImagePreview.style.display="none",this.capturedImagePreview.src="#",this.cameraHelper.stopStream(),this.mapPicker.resetMap(),this._handlePhotoSourceChange(),this.displayDescriptionError(""),this.displayPhotoError("")}},{key:"unmount",value:function(){this.cameraHelper.stopStream(),this.mapPicker&&this.mapPicker.destroyMap(),console.log("AddStoryView unmounted")}}],r&&At(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Ct(){Ct=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==Et(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(Et(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function St(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function It(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bt(n.key),n)}}function Bt(t){var r=function(t){if("object"!=Et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=Et(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Et(r)?r:r+""}var Pt=function(){return t=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=r,this.view=e},r=[{key:"handleLogin",value:(e=Ct().mark((function t(r,e){var n;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.view.showMessage("Mencoba login...","info"),t.next=4,this.model.login(r,e);case 4:(n=t.sent).error?this.view.showMessage(n.message,"error"):this.view.handleLoginSuccess(n.loginResult),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.view.showMessage(t.t0.message||"Login gagal. Periksa kembali email dan password Anda.","error");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){St(i,n,o,a,s,"next",t)}function s(t){St(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t,r){return n.apply(this,arguments)})}],r&&It(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Ot(){Ot=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==jt(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(jt(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function _t(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function Tt(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){_t(i,n,o,a,s,"next",t)}function s(t){_t(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Mt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gt(n.key),n)}}function Gt(t){var r=function(t){if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=jt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jt(r)?r:r+""}var Lt=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainElement=r},r=[{key:"render",value:(n=Tt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mainElement.innerHTML='\n  <section class="login-page">\n    <h2>Login Akun</h2>\n    <form id="loginForm" novalidate>\n      <div class="form-group">\n        <label for="loginEmail">Email:</label>\n        <input type="email" id="loginEmail" name="email" required>\n      </div>\n      <div class="form-group">\n        <label for="loginPassword">Password:</label>\n        <input type="password" id="loginPassword" name="password" required>\n      </div>\n      <button type="submit" id="loginButton">Login</button>\n      <div id="loginMessage" class="message-area" style="margin-top:15px;"></div>\n    </form>\n    <p style="margin-top: 15px;">Belum punya akun? <a href="#register">Daftar di sini</a></p>\n  </section>\n',this.form=this.mainElement.querySelector("#loginForm"),this.emailInput=this.mainElement.querySelector("#loginEmail"),this.passwordInput=this.mainElement.querySelector("#loginPassword"),this.messageArea=this.mainElement.querySelector("#loginMessage"),this.loginButton=this.mainElement.querySelector("#loginButton");case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=Tt(Ot().mark((function t(){var r,e=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new m,this.presenter=new Pt(r,this),this.form.addEventListener("submit",function(){var t=Tt(Ot().mark((function t(r){var n,o;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=e.emailInput.value,o=e.passwordInput.value,n&&o){t.next=6;break}return e.showMessage("Email dan password wajib diisi.","error"),t.abrupt("return");case 6:return e.loginButton.disabled=!0,e.loginButton.textContent="Memproses...",t.next=10,e.presenter.handleLogin(n,o);case 10:e.loginButton.disabled=!1,e.loginButton.textContent="Login";case 12:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"handleLoginSuccess",value:function(t){var r,e;r=t.token,localStorage.setItem("authToken",r),(e={userId:t.userId,name:t.name}).name&&localStorage.setItem("authUserName",e.name),e.userId&&localStorage.setItem("authUserId",e.userId),this.showMessage("Login berhasil! Mengarahkan ke beranda...","success"),window.dispatchEvent(new CustomEvent("authChanged")),setTimeout((function(){window.location.hash="#"}),1500)}},{key:"showMessage",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.messageArea.textContent=t,this.messageArea.className="message-area ".concat(r),this.messageArea.style.display="block"}},{key:"unmount",value:function(){console.log("LoginView unmounted")}}],r&&Mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Dt(){Dt=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==Ft(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(Ft(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function Nt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function qt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zt(n.key),n)}}function zt(t){var r=function(t){if("object"!=Ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=Ft(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ft(r)?r:r+""}var Ut=function(){return t=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=r,this.view=e},r=[{key:"handleRegister",value:(e=Dt().mark((function t(r,e,n){var o;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.view.showMessage("Mencoba mendaftar...","info"),t.next=4,this.model.register(r,e,n);case 4:(o=t.sent).error?this.view.showMessage(o.message||"Registrasi gagal.","error"):this.view.handleRegisterSuccess(o.message),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.view.showMessage(t.t0.message||"Registrasi gagal. Silakan coba lagi.","error");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})),n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Nt(i,n,o,a,s,"next",t)}function s(t){Nt(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t,r,e){return n.apply(this,arguments)})}],r&&qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Rt(){Rt=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==Ht(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(Ht(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function Yt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function Vt(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Yt(i,n,o,a,s,"next",t)}function s(t){Yt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Wt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Kt(t){var r=function(t){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=Ht(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(r)?r:r+""}var Xt=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainElement=r},r=[{key:"render",value:(n=Vt(Rt().mark((function t(){return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mainElement.innerHTML='\n  <section class="register-page">\n    <h2>Daftar Akun Baru</h2>\n    <form id="registerForm" novalidate>\n      <div class="form-group">\n        <label for="registerName">Nama:</label>\n        <input type="text" id="registerName" name="name" required>\n      </div>\n      <div class="form-group">\n        <label for="registerEmail">Email:</label>\n        <input type="email" id="registerEmail" name="email" required>\n      </div>\n      <div class="form-group">\n        <label for="registerPassword">Password (min. 8 karakter):</label>\n        <input type="password" id="registerPassword" name="password" required minlength="8">\n      </div>\n      <button type="submit" id="registerButton">Daftar</button>\n      <div id="registerMessage" class="message-area" style="margin-top:15px;"></div>\n    </form>\n    <p style="margin-top: 15px;">Sudah punya akun? <a href="#login">Login di sini</a></p>\n  </section>\n',this.form=this.mainElement.querySelector("#registerForm"),this.nameInput=this.mainElement.querySelector("#registerName"),this.emailInput=this.mainElement.querySelector("#registerEmail"),this.passwordInput=this.mainElement.querySelector("#registerPassword"),this.messageArea=this.mainElement.querySelector("#registerMessage"),this.registerButton=this.mainElement.querySelector("#registerButton");case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=Vt(Rt().mark((function t(){var r,e=this;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new m,this.presenter=new Ut(r,this),this.form.addEventListener("submit",function(){var t=Vt(Rt().mark((function t(r){var n,o,i;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=e.nameInput.value,o=e.emailInput.value,i=e.passwordInput.value,n&&o&&i){t.next=7;break}return e.showMessage("Nama, email, dan password wajib diisi.","error"),t.abrupt("return");case 7:if(!(i.length<8)){t.next=10;break}return e.showMessage("Password minimal harus 8 karakter.","error"),t.abrupt("return");case 10:return e.registerButton.disabled=!0,e.registerButton.textContent="Memproses...",t.next=14,e.presenter.handleRegister(n,o,i);case 14:e.registerButton.disabled=!1,e.registerButton.textContent="Daftar";case 16:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"handleRegisterSuccess",value:function(t){this.showMessage(t+" Anda akan diarahkan ke halaman login.","success"),setTimeout((function(){window.location.hash="#login"}),2500)}},{key:"showMessage",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.messageArea.textContent=t,this.messageArea.className="message-area ".concat(r),this.messageArea.style.display="block"}},{key:"unmount",value:function(){console.log("RegisterView unmounted")}}],r&&Wt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}();function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Zt(){Zt=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==Jt(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(Jt(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function Qt(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function $t(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Qt(i,n,o,a,s,"next",t)}function s(t){Qt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function tr(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rr(n.key),n)}}function rr(t){var r=function(t){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=Jt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jt(r)?r:r+""}var er=function(){return t=function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainElement=r},r=[{key:"render",value:(n=$t(Zt().mark((function t(){return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.mainElement.innerHTML='\n      <section class="not-found-page" style="text-align: center; padding: 40px; min-height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">\n        <h2>404 - Halaman Tidak Ditemukan</h2>\n        <p>Maaf, halaman yang Anda cari tidak ada atau telah dipindahkan.</p>\n        <a href="#" style="margin-top: 20px; padding: 10px 20px; background-color: var(--primary-color); color: white; text-decoration: none; border-radius: 5px;">Kembali ke Beranda</a>\n      </section>\n    ';case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=$t(Zt().mark((function t(){return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("NotFoundView rendered.");case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"unmount",value:function(){console.log("NotFoundView unmounted.")}}],r&&tr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,n}(),nr=e(72),or=e.n(nr),ir=e(825),ar=e.n(ir),sr=e(659),ur=e.n(sr),cr=e(56),lr=e.n(cr),hr=e(540),fr=e.n(hr),pr=e(113),dr=e.n(pr),yr=e(249),mr={};mr.styleTagTransform=dr(),mr.setAttributes=lr(),mr.insert=ur().bind(null,"head"),mr.domAPI=ar(),mr.insertStyleElement=fr(),or()(yr.A,mr),yr.A&&yr.A.locals&&yr.A.locals;var gr=e(272),vr=e(927),wr=e(980);function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function Ar(){Ar=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,r,e,n){return Object.defineProperty(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,r,e){return t[r]=e}}function c(r,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return u(a,"_invoke",function(r,e,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(r,e,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(r,n,new E(o||[])),!0),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=c;var h={};function f(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(y=g);var v=d.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function e(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==br(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):r.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(u.arg)}var o;u(this,"_invoke",(function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}),!0)}function A(r,e){var n=e.method,o=r.i[n];if(o===t)return e.delegate=null,"throw"===n&&r.i.return&&(e.method="return",e.arg=t,A(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,r.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[r.r]=a.value,e.next=r.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(r){var e=r[4]||{};e.type="normal",e.arg=t,r[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function C(r){if(null!=r){var e=r[i];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(br(r)+" is not iterable")}return p.prototype=d,u(v,"constructor",d),u(d,"constructor",p),p.displayName=u(d,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===p||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},r.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),r.AsyncIterator=b,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),u(v,s,"Generator"),u(v,i,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.unshift(n);return function t(){for(;e.length;)if((n=e.pop())in r)return t.value=n,t.done=!1,t;return t.done=!0,t}},r.values=C,E.prototype={constructor:E,reset:function(r){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(t){a.type="throw",a.arg=r,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=r&&r<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[2]===t)return this.complete(e[4],e[3]),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e[0]===t){var n=e[4];if("throw"===n.type){var o=n.arg;x(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={i:C(r),r:e,n},"next"===this.method&&(this.arg=t),h}},r}function kr(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function xr(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){kr(i,n,o,a,s,"next",t)}function s(t){kr(i,n,o,a,s,"throw",t)}a(void 0)}))}}delete Y().Icon.Default.prototype._getIconUrl,Y().Icon.Default.mergeOptions({iconRetinaUrl:gr,iconUrl:vr,shadowUrl:wr});var Er=document.getElementById("main-content"),Cr=document.getElementById("navAuthContainer"),Sr={"":Q,"#stories":Q,"#add-story":xt,"#login":Lt,"#register":Xt,"*":er};function Ir(){var t=c(),r=localStorage.getItem("authUserName");t&&Cr?(Cr.innerHTML='\n      <li class="nav-greeting">Halo, '.concat(r||"Pengguna",'!</li>\n      <li><a href="#" id="logoutButton">Logout</a></li>\n    '),document.getElementById("logoutButton").addEventListener("click",(function(t){t.preventDefault(),localStorage.removeItem("authToken"),localStorage.removeItem("authUserName"),localStorage.removeItem("authUserId"),Ir(),window.location.hash="#login"}))):Cr&&(Cr.innerHTML='\n      <li><a href="#login">Login</a></li>\n      <li><a href="#register">Register</a></li>\n    ')}function Br(t){for(var r=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),e=window.atob(r),n=new Uint8Array(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);return n}function Pr(t){return jr.apply(this,arguments)}function jr(){return(jr=xr(Ar().mark((function t(r){var e,n;return Ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Br("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"),t.prev=1,t.next=4,r.pushManager.getSubscription();case 4:if(null!==(n=t.sent)){t.next=15;break}return console.log("Belum ada subscription, membuat yang baru..."),t.next=9,r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e});case 9:return n=t.sent,console.log("Berhasil subscribe:",JSON.stringify(n)),t.next=13,Or(n);case 13:t.next=16;break;case 15:console.log("Sudah ada subscription.");case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),console.error("Gagal subscribe ke push notifications:",t.t0);case 21:case"end":return t.stop()}}),t,null,[[1,18]])})))).apply(this,arguments)}function Or(t){return _r.apply(this,arguments)}function _r(){return(_r=xr(Ar().mark((function t(r){var e,n;return Ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new m,t.prev=1,c()){t.next=5;break}return console.warn("Pengguna belum login, tidak bisa mengirim subscription ke server API."),t.abrupt("return");case 5:return n={endpoint:r.endpoint,keys:r.keys},t.next=8,e.subscribeToNotifications(n);case 8:console.log("Subscription berhasil dikirim ke server API."),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error("Gagal mengirim subscription ke server API:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}function Tr(){return Mr.apply(this,arguments)}function Mr(){return(Mr=xr(Ar().mark((function t(){var r;return Ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("serviceWorker"in navigator){t.next=3;break}return console.warn("Service Worker tidak didukung."),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.serviceWorker.register("./sw.js");case 6:return r=t.sent,console.log("Service Worker berhasil diregistrasi (manual):",r),t.next=10,navigator.serviceWorker.ready;case 10:console.log("Service Worker siap (manual)."),"PushManager"in window&&c(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("Registrasi Service Worker gagal (manual):",t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}window.addEventListener("DOMContentLoaded",(function(){if(Er){s.init(Er,Sr),Ir(),Tr();var t=document.createElement("button");t.textContent="Aktifkan Notifikasi",t.id="enableNotifButton",t.style.cssText="position:fixed; bottom:10px; right:10px; padding:10px; background-color:var(--primary-color); color:white; border:none; border-radius:5px; cursor:pointer; z-index:1000;",navigator.serviceWorker.ready.then((function(r){r&&r.pushManager?r.pushManager.getSubscription().then((function(r){(r||"granted"===Notification.permission)&&(t.style.display="none")})):"granted"===Notification.permission&&(t.style.display="none")})),t.addEventListener("click",xr(Ar().mark((function r(){return Ar().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!("PushManager"in window)||!c()){r.next=7;break}return r.next=3,Notification.requestPermission();case 3:"granted"===r.sent?(t.style.display="none",navigator.serviceWorker.ready.then((function(t){t&&Pr(t)}))):alert("Anda tidak memberikan izin untuk notifikasi."),r.next=8;break;case 7:c()?alert("Push Notifikasi tidak didukung di browser ini."):alert("Anda harus login untuk mengaktifkan notifikasi.");case 8:case"end":return r.stop()}}),r)})))),document.body.appendChild(t)}else console.error("Elemen konten utama tidak ditemukan!")})),window.addEventListener("hashchange",(function(){})),window.addEventListener("authChanged",(function(){Ir(),c()&&Tr()}))},249:(t,r,e)=>{e.d(r,{A:()=>s});var n=e(354),o=e.n(n),i=e(314),a=e.n(i)()(o());a.push([t.id,'/* src/styles/main.css (atau nama file CSS Anda) */\n:root {\n    --primary-color: #2c3e50; /* Contoh: Biru tua */\n    --secondary-color: #3498db; /* Contoh: Biru muda */\n    --accent-color: #e74c3c; /* Contoh: Merah */\n    --background-color: #ecf0f1; /* Contoh: Abu-abu sangat muda */\n    --text-color: #333333;\n    --card-background: #ffffff;\n    --border-color: #dddddd;\n}\n\nbody {\n    font-family: sans-serif;\n    margin: 0;\n    line-height: 1.6;\n    background-color: var(--background-color);\n    color: var(--text-color);\n}\n\nheader {\n    background-color: var(--primary-color);\n    color: white;\n    padding: 1rem 0;\n    text-align: center;\n}\n\nheader h1 {\n    margin: 0;\n}\n\nnav ul {\n    padding: 0;\n    list-style: none;\n    text-align: center;\n}\n\nnav ul li {\n    display: inline;\n    margin-right: 20px;\n}\n\nnav a {\n    color: white; /* Atau warna kontras lain */\n}\n\nnav a:hover {\n    color: var(--secondary-color);\n}\n\nmain {\n    padding: 20px;\n    max-width: 960px;\n    margin: 20px auto;\n    background-color: #fff;\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n}\n\nfooter {\n    text-align: center;\n    padding: 20px;\n    background: #333;\n    color: #fff;\n    margin-top: 30px;\n}\n\n/* Skip Link (Kriteria Wajib 5) */\n.skip-link {\n    position: absolute;\n    top: -40px; /* Sembunyikan di luar layar */\n    left: 0;\n    background: #333;\n    color: white;\n    padding: 8px;\n    z-index: 100;\n    text-decoration: none;\n}\n\n.skip-link:focus {\n    top: 0; /* Munculkan saat fokus */\n}\n\n/* Story List */\n.story-list-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 20px;\n}\n\n.story-item, .add-story-page, .login-page, .register-page {\n    background-color: var(--card-background);\n    border: 1px solid var(--border-color);\n}\n\n.story-item {\n    padding: 15px;\n    border-radius: 5px;\n}\n\n.story-item .story-image {\n    width: 100%;\n    max-height: 200px;\n    object-fit: cover;\n    border-radius: 3px;\n    margin-bottom: 10px;\n}\n\n.story-item .story-user {\n    font-style: italic;\n    font-size: 0.9em;\n    color: #555;\n}\n\n.story-item .story-description {\n    margin-top: 5px;\n    margin-bottom: 10px;\n    font-size: 0.95em;\n}\n.story-item .story-date {\n    font-size: 0.8em;\n    color: #777;\n}\n.story-item-map, #mainStoryMap, #mapPickerContainer {\n    border: 1px solid #ccc;\n}\n\n\n/* Add Story Form */\n.add-story-page .form-group {\n    margin-bottom: 15px;\n}\n\n.add-story-page label {\n    display: block;\n    margin-bottom: 5px;\n    font-weight: bold;\n}\n\n.add-story-page input[type="file"],\n.add-story-page input[type="text"],\n.add-story-page textarea,\n.add-story-page select {\n    width: 100%;\n    padding: 8px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    box-sizing: border-box; /* Penting untuk padding dan border tidak menambah lebar */\n}\n\n.add-story-page textarea {\n    min-height: 80px;\n    resize: vertical;\n}\n\n.add-story-page button[type="submit"],\n.add-story-page button[type="button"] {\n    background: #5cb85c;\n    color: white;\n    padding: 10px 15px;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 1em;\n}\n\n.add-story-page button[type="submit"]:hover,\n.add-story-page button[type="button"]:hover {\n    background: #4cae4c;\n}\n.add-story-page button[type="submit"]:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n}\n\n.message-area {\n    padding: 10px;\n    margin-top: 15px;\n    border-radius: 4px;\n    text-align: center;\n}\n.message-area.info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb;}\n.message-area.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;}\n.message-area.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;}\n\n.error-feedback {\n    color: red;\n    font-size: 0.9em;\n    margin-top: 4px;\n}\n\n/* Loading and Error Messages */\n.loading {\n    text-align: center;\n    padding: 20px;\n    font-style: italic;\n}\n.error-message {\n    text-align: center;\n    padding: 20px;\n    color: red;\n    border: 1px solid red;\n    background-color: #ffebeb;\n}\n\n\n/* Mobile Friendly (Contoh Media Query) */\n@media (max-width: 768px) {\n    .story-list-container {\n        grid-template-columns: 1fr; /* Satu kolom di layar kecil */\n    }\n    nav ul li {\n        display: block;\n        margin: 10px 0;\n    }\n}\n\n/* View Transition API Customization (Kriteria Opsional) */\n/*!* Contoh: Slide sederhana dari kanan ke kiri *!*/\n/*@keyframes slide-from-right {*/\n/*    from { transform: translateX(100%); opacity: 0; }*/\n/*    to { transform: translateX(0); opacity: 1; }*/\n/*}*/\n\n/*@keyframes slide-to-left {*/\n/*    from { transform: translateX(0); opacity: 1; }*/\n/*    to { transform: translateX(-100%); opacity: 0; }*/\n/*}*/\n\n/*!* Contoh lain: Zoom in/out *!*/\n/*@keyframes zoom-in {*/\n/*    from { transform: scale(0.8); opacity: 0; }*/\n/*    to { transform: scale(1); opacity: 1; }*/\n/*}*/\n/*@keyframes zoom-out {*/\n/*    from { transform: scale(1); opacity: 1; }*/\n/*    to { transform: scale(1.2); opacity: 0; }*/\n/*}*/\n\n/*!* Contoh sederhana: fade in/out *!*/\n/*::view-transition-old(root) {*/\n/*    animation: 0.3s linear fade-out;*/\n/*}*/\n/*::view-transition-new(root) {*/\n/*    animation: 0.3s linear 0.1s fade-in; !* delay sedikit untuk fade-out selesai *!*/\n/*}*/\n\n/*@keyframes fade-in {*/\n/*    from { opacity: 0; }*/\n/*    to { opacity: 1; }*/\n/*}*/\n/*@keyframes fade-out {*/\n/*    from { opacity: 1; }*/\n/*    to { opacity: 0; }*/\n/*}*/\n\n@keyframes customFadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n@keyframes customFadeOut {\n    from { opacity: 1; }\n    to { opacity: 0; }\n}\n\n/* Anda bisa memilih satu set animasi atau membuat logika untuk animasi berbeda.\n   Untuk saat ini, kita akan fokus pada fade yang lebih halus.\n   Komentari @keyframes slide-* dan zoom-* jika tidak digunakan agar CSS lebih bersih.\n*/\n/*\n@keyframes slide-from-right {\n    from { transform: translateX(30px); opacity: 0; } // Sedikit slide\n    to { transform: translateX(0); opacity: 1; }\n}\n\n@keyframes slide-to-left {\n    from { transform: translateX(0); opacity: 1; }\n    to { transform: translateX(-30px); opacity: 0; } // Sedikit slide\n}\n*/\n\n/* Transisi untuk konten lama yang keluar */\n::view-transition-old(root) {\n    animation-name: customFadeOut;\n    animation-duration: 250ms; /* Durasi bisa disesuaikan, 200-300ms biasanya baik */\n    animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1); /* Easing standar untuk keluar */\n    animation-fill-mode: forwards; /* Pertahankan state akhir animasi */\n}\n\n/* Transisi untuk konten baru yang masuk */\n::view-transition-new(root) {\n    /*animation-name: customFadeIn;*/\n    /*animation-duration: 250ms;*/\n    /*animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1); !* Easing standar untuk masuk *!*/\n    /*animation-fill-mode: forwards;*/\n    /* animation-delay: 50ms; */ /* Hapus atau sesuaikan delay jika ada, kadang tidak perlu */\n}\n\n/* Pastikan @keyframes fade-in dan fade-out Anda sebelumnya jika masih ada,\n   diubah namanya atau dihapus untuk menghindari konflik jika namanya sama\n   (saya sudah mengubahnya menjadi customFadeIn dan customFadeOut di atas)\n*/\n',"",{version:3,sources:["webpack://./src/styles/main.css"],names:[],mappings:"AAAA,kDAAkD;AAClD;IACI,wBAAwB,EAAE,qBAAqB;IAC/C,0BAA0B,EAAE,sBAAsB;IAClD,uBAAuB,EAAE,kBAAkB;IAC3C,2BAA2B,EAAE,gCAAgC;IAC7D,qBAAqB;IACrB,0BAA0B;IAC1B,uBAAuB;AAC3B;;AAEA;IACI,uBAAuB;IACvB,SAAS;IACT,gBAAgB;IAChB,yCAAyC;IACzC,wBAAwB;AAC5B;;AAEA;IACI,sCAAsC;IACtC,YAAY;IACZ,eAAe;IACf,kBAAkB;AACtB;;AAEA;IACI,SAAS;AACb;;AAEA;IACI,UAAU;IACV,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,kBAAkB;AACtB;;AAEA;IACI,YAAY,EAAE,4BAA4B;AAC9C;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,aAAa;IACb,gBAAgB;IAChB,iBAAiB;IACjB,sBAAsB;IACtB,oCAAoC;AACxC;;AAEA;IACI,kBAAkB;IAClB,aAAa;IACb,gBAAgB;IAChB,WAAW;IACX,gBAAgB;AACpB;;AAEA,iCAAiC;AACjC;IACI,kBAAkB;IAClB,UAAU,EAAE,8BAA8B;IAC1C,OAAO;IACP,gBAAgB;IAChB,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,qBAAqB;AACzB;;AAEA;IACI,MAAM,EAAE,yBAAyB;AACrC;;AAEA,eAAe;AACf;IACI,aAAa;IACb,4DAA4D;IAC5D,SAAS;AACb;;AAEA;IACI,wCAAwC;IACxC,qCAAqC;AACzC;;AAEA;IACI,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,WAAW;IACX,iBAAiB;IACjB,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;AACvB;;AAEA;IACI,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,eAAe;IACf,mBAAmB;IACnB,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,WAAW;AACf;AACA;IACI,sBAAsB;AAC1B;;;AAGA,mBAAmB;AACnB;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,iBAAiB;AACrB;;AAEA;;;;IAII,WAAW;IACX,YAAY;IACZ,sBAAsB;IACtB,kBAAkB;IAClB,sBAAsB,EAAE,0DAA0D;AACtF;;AAEA;IACI,gBAAgB;IAChB,gBAAgB;AACpB;;AAEA;;IAEI,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAClB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,cAAc;AAClB;;AAEA;;IAEI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;AACtB;AACA,qBAAqB,yBAAyB,EAAE,cAAc,EAAE,yBAAyB,CAAC;AAC1F,wBAAwB,yBAAyB,EAAE,cAAc,EAAE,yBAAyB,CAAC;AAC7F,sBAAsB,yBAAyB,EAAE,cAAc,EAAE,yBAAyB,CAAC;;AAE3F;IACI,UAAU;IACV,gBAAgB;IAChB,eAAe;AACnB;;AAEA,+BAA+B;AAC/B;IACI,kBAAkB;IAClB,aAAa;IACb,kBAAkB;AACtB;AACA;IACI,kBAAkB;IAClB,aAAa;IACb,UAAU;IACV,qBAAqB;IACrB,yBAAyB;AAC7B;;;AAGA,yCAAyC;AACzC;IACI;QACI,0BAA0B,EAAE,8BAA8B;IAC9D;IACA;QACI,cAAc;QACd,cAAc;IAClB;AACJ;;AAEA,0DAA0D;AAC1D,mDAAmD;AACnD,gCAAgC;AAChC,wDAAwD;AACxD,mDAAmD;AACnD,IAAI;;AAEJ,6BAA6B;AAC7B,qDAAqD;AACrD,uDAAuD;AACvD,IAAI;;AAEJ,iCAAiC;AACjC,uBAAuB;AACvB,kDAAkD;AAClD,8CAA8C;AAC9C,IAAI;AACJ,wBAAwB;AACxB,gDAAgD;AAChD,gDAAgD;AAChD,IAAI;;AAEJ,sCAAsC;AACtC,gCAAgC;AAChC,uCAAuC;AACvC,IAAI;AACJ,gCAAgC;AAChC,sFAAsF;AACtF,IAAI;;AAEJ,uBAAuB;AACvB,2BAA2B;AAC3B,yBAAyB;AACzB,IAAI;AACJ,wBAAwB;AACxB,2BAA2B;AAC3B,yBAAyB;AACzB,IAAI;;AAEJ;IACI,OAAO,UAAU,EAAE;IACnB,KAAK,UAAU,EAAE;AACrB;;AAEA;IACI,OAAO,UAAU,EAAE;IACnB,KAAK,UAAU,EAAE;AACrB;;AAEA;;;CAGC;AACD;;;;;;;;;;CAUC;;AAED,2CAA2C;AAC3C;IACI,6BAA6B;IAC7B,yBAAyB,EAAE,qDAAqD;IAChF,yDAAyD,EAAE,gCAAgC;IAC3F,6BAA6B,EAAE,oCAAoC;AACvE;;AAEA,0CAA0C;AAC1C;IACI,gCAAgC;IAChC,6BAA6B;IAC7B,8FAA8F;IAC9F,iCAAiC;IACjC,2BAA2B,EAAE,4DAA4D;AAC7F;;AAEA;;;CAGC",sourcesContent:['/* src/styles/main.css (atau nama file CSS Anda) */\r\n:root {\r\n    --primary-color: #2c3e50; /* Contoh: Biru tua */\r\n    --secondary-color: #3498db; /* Contoh: Biru muda */\r\n    --accent-color: #e74c3c; /* Contoh: Merah */\r\n    --background-color: #ecf0f1; /* Contoh: Abu-abu sangat muda */\r\n    --text-color: #333333;\r\n    --card-background: #ffffff;\r\n    --border-color: #dddddd;\r\n}\r\n\r\nbody {\r\n    font-family: sans-serif;\r\n    margin: 0;\r\n    line-height: 1.6;\r\n    background-color: var(--background-color);\r\n    color: var(--text-color);\r\n}\r\n\r\nheader {\r\n    background-color: var(--primary-color);\r\n    color: white;\r\n    padding: 1rem 0;\r\n    text-align: center;\r\n}\r\n\r\nheader h1 {\r\n    margin: 0;\r\n}\r\n\r\nnav ul {\r\n    padding: 0;\r\n    list-style: none;\r\n    text-align: center;\r\n}\r\n\r\nnav ul li {\r\n    display: inline;\r\n    margin-right: 20px;\r\n}\r\n\r\nnav a {\r\n    color: white; /* Atau warna kontras lain */\r\n}\r\n\r\nnav a:hover {\r\n    color: var(--secondary-color);\r\n}\r\n\r\nmain {\r\n    padding: 20px;\r\n    max-width: 960px;\r\n    margin: 20px auto;\r\n    background-color: #fff;\r\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\r\n}\r\n\r\nfooter {\r\n    text-align: center;\r\n    padding: 20px;\r\n    background: #333;\r\n    color: #fff;\r\n    margin-top: 30px;\r\n}\r\n\r\n/* Skip Link (Kriteria Wajib 5) */\r\n.skip-link {\r\n    position: absolute;\r\n    top: -40px; /* Sembunyikan di luar layar */\r\n    left: 0;\r\n    background: #333;\r\n    color: white;\r\n    padding: 8px;\r\n    z-index: 100;\r\n    text-decoration: none;\r\n}\r\n\r\n.skip-link:focus {\r\n    top: 0; /* Munculkan saat fokus */\r\n}\r\n\r\n/* Story List */\r\n.story-list-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    gap: 20px;\r\n}\r\n\r\n.story-item, .add-story-page, .login-page, .register-page {\r\n    background-color: var(--card-background);\r\n    border: 1px solid var(--border-color);\r\n}\r\n\r\n.story-item {\r\n    padding: 15px;\r\n    border-radius: 5px;\r\n}\r\n\r\n.story-item .story-image {\r\n    width: 100%;\r\n    max-height: 200px;\r\n    object-fit: cover;\r\n    border-radius: 3px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.story-item .story-user {\r\n    font-style: italic;\r\n    font-size: 0.9em;\r\n    color: #555;\r\n}\r\n\r\n.story-item .story-description {\r\n    margin-top: 5px;\r\n    margin-bottom: 10px;\r\n    font-size: 0.95em;\r\n}\r\n.story-item .story-date {\r\n    font-size: 0.8em;\r\n    color: #777;\r\n}\r\n.story-item-map, #mainStoryMap, #mapPickerContainer {\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n\r\n/* Add Story Form */\r\n.add-story-page .form-group {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.add-story-page label {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.add-story-page input[type="file"],\r\n.add-story-page input[type="text"],\r\n.add-story-page textarea,\r\n.add-story-page select {\r\n    width: 100%;\r\n    padding: 8px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    box-sizing: border-box; /* Penting untuk padding dan border tidak menambah lebar */\r\n}\r\n\r\n.add-story-page textarea {\r\n    min-height: 80px;\r\n    resize: vertical;\r\n}\r\n\r\n.add-story-page button[type="submit"],\r\n.add-story-page button[type="button"] {\r\n    background: #5cb85c;\r\n    color: white;\r\n    padding: 10px 15px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 1em;\r\n}\r\n\r\n.add-story-page button[type="submit"]:hover,\r\n.add-story-page button[type="button"]:hover {\r\n    background: #4cae4c;\r\n}\r\n.add-story-page button[type="submit"]:disabled {\r\n    background-color: #ccc;\r\n    cursor: not-allowed;\r\n}\r\n\r\n.message-area {\r\n    padding: 10px;\r\n    margin-top: 15px;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n}\r\n.message-area.info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb;}\r\n.message-area.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;}\r\n.message-area.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;}\r\n\r\n.error-feedback {\r\n    color: red;\r\n    font-size: 0.9em;\r\n    margin-top: 4px;\r\n}\r\n\r\n/* Loading and Error Messages */\r\n.loading {\r\n    text-align: center;\r\n    padding: 20px;\r\n    font-style: italic;\r\n}\r\n.error-message {\r\n    text-align: center;\r\n    padding: 20px;\r\n    color: red;\r\n    border: 1px solid red;\r\n    background-color: #ffebeb;\r\n}\r\n\r\n\r\n/* Mobile Friendly (Contoh Media Query) */\r\n@media (max-width: 768px) {\r\n    .story-list-container {\r\n        grid-template-columns: 1fr; /* Satu kolom di layar kecil */\r\n    }\r\n    nav ul li {\r\n        display: block;\r\n        margin: 10px 0;\r\n    }\r\n}\r\n\r\n/* View Transition API Customization (Kriteria Opsional) */\r\n/*!* Contoh: Slide sederhana dari kanan ke kiri *!*/\r\n/*@keyframes slide-from-right {*/\r\n/*    from { transform: translateX(100%); opacity: 0; }*/\r\n/*    to { transform: translateX(0); opacity: 1; }*/\r\n/*}*/\r\n\r\n/*@keyframes slide-to-left {*/\r\n/*    from { transform: translateX(0); opacity: 1; }*/\r\n/*    to { transform: translateX(-100%); opacity: 0; }*/\r\n/*}*/\r\n\r\n/*!* Contoh lain: Zoom in/out *!*/\r\n/*@keyframes zoom-in {*/\r\n/*    from { transform: scale(0.8); opacity: 0; }*/\r\n/*    to { transform: scale(1); opacity: 1; }*/\r\n/*}*/\r\n/*@keyframes zoom-out {*/\r\n/*    from { transform: scale(1); opacity: 1; }*/\r\n/*    to { transform: scale(1.2); opacity: 0; }*/\r\n/*}*/\r\n\r\n/*!* Contoh sederhana: fade in/out *!*/\r\n/*::view-transition-old(root) {*/\r\n/*    animation: 0.3s linear fade-out;*/\r\n/*}*/\r\n/*::view-transition-new(root) {*/\r\n/*    animation: 0.3s linear 0.1s fade-in; !* delay sedikit untuk fade-out selesai *!*/\r\n/*}*/\r\n\r\n/*@keyframes fade-in {*/\r\n/*    from { opacity: 0; }*/\r\n/*    to { opacity: 1; }*/\r\n/*}*/\r\n/*@keyframes fade-out {*/\r\n/*    from { opacity: 1; }*/\r\n/*    to { opacity: 0; }*/\r\n/*}*/\r\n\r\n@keyframes customFadeIn {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n}\r\n\r\n@keyframes customFadeOut {\r\n    from { opacity: 1; }\r\n    to { opacity: 0; }\r\n}\r\n\r\n/* Anda bisa memilih satu set animasi atau membuat logika untuk animasi berbeda.\r\n   Untuk saat ini, kita akan fokus pada fade yang lebih halus.\r\n   Komentari @keyframes slide-* dan zoom-* jika tidak digunakan agar CSS lebih bersih.\r\n*/\r\n/*\r\n@keyframes slide-from-right {\r\n    from { transform: translateX(30px); opacity: 0; } // Sedikit slide\r\n    to { transform: translateX(0); opacity: 1; }\r\n}\r\n\r\n@keyframes slide-to-left {\r\n    from { transform: translateX(0); opacity: 1; }\r\n    to { transform: translateX(-30px); opacity: 0; } // Sedikit slide\r\n}\r\n*/\r\n\r\n/* Transisi untuk konten lama yang keluar */\r\n::view-transition-old(root) {\r\n    animation-name: customFadeOut;\r\n    animation-duration: 250ms; /* Durasi bisa disesuaikan, 200-300ms biasanya baik */\r\n    animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1); /* Easing standar untuk keluar */\r\n    animation-fill-mode: forwards; /* Pertahankan state akhir animasi */\r\n}\r\n\r\n/* Transisi untuk konten baru yang masuk */\r\n::view-transition-new(root) {\r\n    /*animation-name: customFadeIn;*/\r\n    /*animation-duration: 250ms;*/\r\n    /*animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1); !* Easing standar untuk masuk *!*/\r\n    /*animation-fill-mode: forwards;*/\r\n    /* animation-delay: 50ms; */ /* Hapus atau sesuaikan delay jika ada, kadang tidak perlu */\r\n}\r\n\r\n/* Pastikan @keyframes fade-in dan fade-out Anda sebelumnya jika masih ada,\r\n   diubah namanya atau dihapus untuk menghindari konflik jika namanya sama\r\n   (saya sudah mengubahnya menjadi customFadeIn dan customFadeOut di atas)\r\n*/\r\n'],sourceRoot:""}]);const s=a}},t=>{t.O(0,[44],(()=>t(t.s=222))),t.O()}]);
//# sourceMappingURL=app.d4357fb71d37656de0ba.bundle.js.map